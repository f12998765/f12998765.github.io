<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.17" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="//fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="/css/main.css">
<link rel="alternate" href="/index.xml" type="application/rss+xml" title="XIZERO">
<link href="https://cdn.bootcss.com/highlight.js/9.7.0/styles/tomorrow.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<title>在Centos7中安装 PPTP VPN - XIZERO</title>
</head>
<body>


	


<div class="md_header">
	<div class="header">
		<a href="/">XIZERO</a>
		<div class="gos">
			<span class="go"><a href="/">Home</a></span>
			<span class="go"><a href="/tags">Tags</a></span>
			<span class="go"><a href="/about">About</a></span>
		</div>
	</div>

	<div class="md_title">在Centos7中安装 PPTP VPN</div>

	<div class="md_tag">
		
			<span> <a href="/tags/vpn">/vpn</a></span>
		
			<span> <a href="/tags/centos7">/centos7</a></span>
		
	</div>

	<div class="md_meta">
		12月5日 2016
	</div>
</div>

<div class="con">
	<div class="md_content">
		

<blockquote>
<p>这篇文章只是简单的记录</p>
</blockquote>

<h2 id="安装软件">安装软件</h2>

<pre><code class="language-bash">yum install ppp pptpd
</code></pre>

<h2 id="配置pptp">配置PPTP</h2>

<h3 id="etc-pptpd-conf">/etc/pptpd.conf</h3>

<pre><code class="language-bash">vim /etc/pptpd.conf
</code></pre>

<p>查找localip和remoteip，去掉前面的注释“#”，结果如下</p>

<pre><code>localip 192.168.0.1
remoteip 192.168.0.234-238,192.168.0.245
</code></pre>

<h3 id="etc-ppp-options-pptpd">/etc/ppp/options/pptpd</h3>

<pre><code class="language-bash">vim /etc/ppp/options/pptpd
</code></pre>

<p>查找”ms-dns”,去掉注释”#”,结果如下</p>

<pre><code>ms-dns 8.8.8.8
ms-dns 8.8.4.4
</code></pre>

<h3 id="etc-ppp-chap-secrets">/etc/ppp/chap-secrets</h3>

<pre><code class="language-bash">vim /etc/ppp/chap-secrets
</code></pre>

<p>添加连接账户,格式如下</p>

<pre><code>用户名 pptpd 密码 *
</code></pre>

<h3 id="etc-sysctl-conf">/etc/sysctl.conf</h3>

<pre><code class="language-bash">vim /etc/sysctl.conf
</code></pre>

<p>在最后添加</p>

<pre><code>net.ipv4.ip_forward=1
</code></pre>

<p>终端运行</p>

<pre><code class="language-bash">sysctl -p
</code></pre>

<h2 id="配置firewalld">配置Firewalld</h2>

<p>启动 Firewalld</p>

<pre><code class="language-bash">systemctl start  firewalld
</code></pre>

<p>运行</p>

<pre><code class="language-bash">firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -i eth0 -p tcp --dport 1723 -j ACCEPT
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -p gre -j ACCEPT
firewall-cmd --permanent --direct --add-rule ipv4 filter POSTROUTING 0 -t nat -o eth0 -j MASQUERADE
firewall-cmd --permanent --direct --add-rule ipv4 filter FORWARD 0 -i ppp+ -o eth0 -j ACCEPT
firewall-cmd --permanent --direct --add-rule ipv4 filter FORWARD 0 -i eth0 -o ppp+ -j ACCEPT
firewall-cmd --reload
</code></pre>

<h2 id="启动pptp">启动PPTP</h2>

<pre><code class="language-bash">#启动
systemctl start pptpd

#重启
systemctl restart pptpd
</code></pre>

<h2 id="参考资料">参考资料</h2>

<ul>
<li><a href="http://www.wanghailin.cn/centos-7-vpn/">Centos 7搭建VPN（PPTP）服务器方法</a></li>
<li><a href="http://www.lightning-ashe.com/develop/setup-pptp-server-on-centos/">Setup PPTP Server on CentOS</a></li>
<li><a href="https://feiio.com/2016/05/15/CentOS7-0%E6%90%AD%E5%BB%BAVPN-PPTP-%E6%9C%8D%E5%8A%A1%E5%99%A8/">CentOS7.0搭建VPN(PPTP)服务器</a></li>
</ul>

	</div>
</div>

<hr class="md_hr">
<div class="footer">
	@XIZERO Powered by <a href="http://hugo.spf13.com/">Hugo</a> and <a href="#">bigbig</a>
</div>
</body>
</html>

