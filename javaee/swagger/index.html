<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.18.1" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="alternate" href="https://www.xizero.com//index.xml" type="application/rss+xml" title="XIZERO">
<link href="https://www.xizero.com/css/tomorrow.min.css" rel="stylesheet">
<link href="https://www.xizero.com/css/main.css" rel="stylesheet">
<link href="https://www.xizero.com/css/context.css" rel="stylesheet">
<link href="https://www.xizero.com/css/jqcloud.css" rel="stylesheet">
<script src="https://www.xizero.com/js/high.min.js"></script>
<script src="https://www.xizero.com/js/jqury.min.js"></script>
<script src="https://www.xizero.com/js/top.js"></script>
<script src="https://www.xizero.com/js/jqcloud.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<title>Swagger - XIZERO</title>
</head>
<body>

<div id="gotop" title="🚀 go top"></div>

<div class="top">

	<div class="gos">
		<span class="go"><a href="https://www.xizero.com/">Home</a></span>
		<span class="go"><a href="/tags/">Tags</a></span>
		<span class="go"><a href="/about/">About</a></span>
	</div>
	
	
		<div class="tit">
			Swagger
		</div>

	

</div>




<div class="con">
	

<h1 id="swagger">Swagger</h1>

<p>官网：<a href="http://swagger.io/">http://swagger.io/</a></p>

<p>Github：<a href="https://github.com/swagger-api">https://github.com/swagger-api</a></p>

<p><strong>THE WORLD&rsquo;S MOST POPULAR API FRAMEWORK</strong></p>

<p>世界上最流行的API框架</p>

<p>Swagger is a powerful open source framework backed by a large ecosystem of tools that helps you design, build, document, and consume your RESTful APIs.</p>

<p>Swagger是一个强大的开源框架，有工具生态系统支持，可帮助您设计，构建，记录和使用RESTful API。</p>

<p>Swagger 官方提供了三个工具，分别用于 Design、Build和Document：</p>

<ul>
<li>Swagger Editor

<ul>
<li>一个设计或编辑 API 的编辑器，能根据 Swagger 规范进行直观的反馈。</li>
</ul></li>
<li>Swagger Codegen

<ul>
<li>将 Swagger 文档转换成代码。</li>
</ul></li>
<li>Swagger UI

<ul>
<li>在浏览器中浏览测试 REST API 。</li>
</ul></li>
</ul>

<h2 id="swagger-editor">Swagger Editor</h2>

<p>Swagger Editor 是一个可视化的 API 编辑器，能根据 Swagger 规范实时校验文档。</p>

<p><img src="https://ox.xizero.com/uploads/2017/02/swagger_editor.png" alt="" /></p>

<h3 id="安装">安装</h3>

<p>Swagger 提供了在线版的 Swagger Editor ：<a href="http://editor.swagger.io/#/">http://editor.swagger.io/</a></p>

<p>也可以在 Github 上下载项目，在本地服务器（Nginx 或 npm http-server）上运行。</p>

<p>Github地址：<a href="https://github.com/swagger-api/swagger-editor">https://github.com/swagger-api/swagger-editor</a></p>

<p>也可以直接在拉取 docker 镜像，运行。</p>

<pre><code class="language-bash">docker pull swaggerapi/swagger-editor
docker run -p 80:8080 swaggerapi/swagger-editor
</code></pre>

<h3 id="使用">使用</h3>

<p>Swagger 的文档需要符合 OpenAPI Specification ，使用 json 或者 yaml 描述 API。</p>

<h3 id="openapi-specification">OpenAPI Specification</h3>

<p>查看官方文档之前，推荐阅读：<a href="https://www.gitbook.com/book/huangwenchao/swagger/details">《如何编写基于OpenAPI规范的API文档》</a>，可以对文档结构有个了解。</p>

<p>官方文档：</p>

<ul>
<li>Swagger 官网上的：<a href="http://swagger.io/specification/">http://swagger.io/specification/</a></li>
<li>Github上的：<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md">https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md</a></li>
</ul>

<blockquote>
<p>国内关于 Swagger 的中文文档较少，简单地翻译了一下  OpenAPI Specification ，水平有限，见谅！</p>
</blockquote>

<p>OpenAPI Specification 中文：<a href="https://www.xizero.com/mixin/OpenAPISpecificationZh/">https://www.xizero.com/mixin/OpenAPISpecificationZh/</a></p>

<p>Arnaud Lauret 大神的 OpenAPI Specification Visual Documentation ，可以对文档结构有个清晰了解。</p>

<ul>
<li>OpenAPI Specification Visual Documentation：<a href="http://openapi-specification-visual-documentation.apihandyman.io/">http://openapi-specification-visual-documentation.apihandyman.io/</a></li>
<li>在 Github 上开源地址：<a href="https://github.com/arno-di-loreto/openapi-specification-visual-documentation">https://github.com/arno-di-loreto/openapi-specification-visual-documentation</a></li>
</ul>

<p>并且大神在其博客上写了一个系列教程：Writing OpenAPI (fka Swagger) Specification tutorial</p>

<ul>
<li>大神的博客：<a href="http://apihandyman.io/">API Handyman - http://apihandyman.io/</a></li>
<li>教程的地址：<a href="http://apihandyman.io/writing-openapi-swagger-specification-tutorial-part-1-introduction/">http://apihandyman.io/writing-openapi-swagger-specification-tutorial-part-1-introduction/</a></li>
</ul>

<h3 id="相关">相关</h3>

<ul>
<li><p>JSON Schema</p>

<ul>
<li>官网：<a href="http://json-schema.org/">http://json-schema.org/</a></li>
<li>Github：<a href="https://github.com/json-schema-org/json-schema-spec">https://github.com/json-schema-org/json-schema-spec</a></li>
</ul></li>

<li><p>YAML</p>

<ul>
<li>The Official YAML Web Site：<a href="http://www.yaml.org/">http://www.yaml.org/</a></li>
<li>阮一峰-YAML 语言教程：<a href="http://www.ruanyifeng.com/blog/2016/07/yaml.html">http://www.ruanyifeng.com/blog/2016/07/yaml.html</a></li>
</ul></li>

<li><p>Google Java Style Guide</p>

<ul>
<li><a href="https://google.github.io/styleguide/javaguide.html">https://google.github.io/styleguide/javaguide.html</a></li>
</ul></li>
</ul>

<h3 id="参考">参考</h3>

<ul>
<li><a href="https://huangwenchao.gitbooks.io/swagger/content/">如何编写基于OpenAPI规范的API文档</a></li>
<li><a href="http://swagger.io/specification/">SWAGGER SPECIFICATION</a></li>
<li><a href="https://github.com/arno-di-loreto/openapi-specification-visual-documentation">OpenAPI Specification Visual Documentation</a></li>
</ul>

<h2 id="swagger-codegen">Swagger Codegen</h2>

<p>Swagger Codegen 是一个代码生成工具，根据符合 Swagger 规范的 API 文档生成 API clients 、Server stubs 或者其他类型的文档，还有其他(JMeter)。支持的语言/框架，如下：</p>

<ul>
<li>API clients: ActionScript, Bash, C# (.net 2.0, 4.0 or later), C++ (cpprest, Qt5, Tizen), Clojure, Dart, Elixir, Go, Groovy, Haskell, Java (Jersey1.x, Jersey2.x, OkHttp, Retrofit1.x, Retrofit2.x, Feign), Node.js (ES5, ES6, AngularJS with Google Closure Compiler annotations) Objective-C, Perl, PHP, Python, Ruby, Scala, Swift (2.x, 3.x), Typescript (Angular1.x, Angular2.x, Fetch, Node)</li>
<li>Server stubs: C# (ASP.NET Core, NancyFx), Erlang, Go, Haskell, Java (MSF4J, Spring, Undertow, JAX-RS: CDI, CXF, Inflector, RestEasy), PHP (Lumen, Slim, Silex, Zend Expressive), Python (Flask), NodeJS, Ruby (Sinatra, Rails5), Scala (Finch, Scalatra)</li>
<li>API documentation generators: HTML, Confluence Wiki</li>
<li>Others: JMeter</li>
</ul>

<h2 id="安装-1">安装</h2>

<h3 id="环境要求">环境要求</h3>

<ul>
<li>Java 7 or 8</li>
<li>Apache maven 3.3.3 or greater</li>
</ul>

<p>安装及配置环境，可以看  <a href="https://www.xizero.com/tool/Java%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%81%A2%E5%A4%8D%E6%89%8B%E5%86%8C/">《Java 开发环境恢复手册》</a>。</p>

<h3 id="下载">下载</h3>

<p>本地环境是 win10 ，关于<a href="https://github.com/swagger-api/swagger-codegen#os-x-users"> OS X</a>、<a href="https://github.com/swagger-api/swagger-codegen#docker">docker</a>下的使用，暂不了解。</p>

<p>可以下载项目，自己编译运行，也可以直接下载 jar 文件执行。</p>

<ul>
<li>克隆编译，生成的 <code>swagger-codegen-cli.jar</code> 文件在 <code>modules/swagger-codegen-cli/target/</code> 下</li>
</ul>

<pre><code class="language-bash">git clone https://github.com/swagger-api/swagger-codegen cd swagger
 -codegen 
mvn clean package 
</code></pre>

<ul>
<li>直接下载

<ul>
<li>Github ：<a href="https://github.com/swagger-api/swagger-codegen/releases">https://github.com/swagger-api/swagger-codegen/releases</a></li>
<li>Maven ：<a href="https://mvnrepository.com/artifact/io.swagger/swagger-codegen">https://mvnrepository.com/artifact/io.swagger/swagger-codegen</a></li>
</ul></li>
</ul>

<h3 id="使用-1">使用</h3>

<p>编译生成的 <code>swagger-codegen-cli.jar</code> 文件在 <code>modules/swagger-codegen-cli/target/</code> 下 ，使用时要注意路径。</p>

<p>而且克隆项目下的 <code>bin</code> 目录中有很多脚本，可以很方便地使用。初学的话，也可以借鉴很多。</p>

<p>下面，解释一下相关的命令：</p>

<h4 id="java-jar-swagger-codegen-cli-2-2-1-jar-help"><code>java -jar swagger-codegen-cli-2.2.1.jar help</code></h4>

<p>查看帮助信息</p>

<p>命令格式：<code>swagger-codegen-cli &lt;command&gt; [&lt;args&gt;]</code></p>

<blockquote>
<p>注意在 win 下使用，应该是 <code>java -jar swagger-codegen-cli-2.2.1.jar  &lt;command&gt; [&lt;args&gt;]</code>，其他地方相同不另做声明</p>
</blockquote>

<p>可以使用 <code>swagger-codegen-cli help &lt;command&gt;</code> 查看相关命令的更多信息。</p>

<p>常用的命令：
- config-help<br />
    - 所选语言的配置帮助
- generate<br />
    - 生成所选语言的代码
- help<br />
    - 显示帮助信息
- langs<br />
    - 显示支持的语言
- meta<br />
    - MetaGenerator. Generator for creating a new template set and configuration for Co the language you specify, and includes default templates to include.
    - 用于自定义模板，暂不了解</p>

<h4 id="config-help"><code>config-help</code></h4>

<p>查看 <code>config-help</code> 命令的使用：</p>

<pre><code class="language-bash">`java -jar swagger-codegen-cli-2.2.1.jar help config-help`
</code></pre>

<p><code>config-help</code> 命令格式：</p>

<pre><code class="language-bash">swagger-codegen-cli config-help (-l &lt;language&gt; | --lang &lt;language&gt;)
</code></pre>

<p><code>config-help</code> 命令参数：
- language - 所选语言</p>

<p><code>config-help</code> 命令样例：</p>

<pre><code class="language-bash">java -jar swagger-codegen-cli-2.2.1.jar config-help -l spring
</code></pre>

<p>获取 <code>spring</code> 的配置帮助，注意 <code>spring</code> 的默认模板是 <code>spring-boot</code>，若要生成 <code>spring-mvc</code> ，需要在 <code>generate</code> 中指定 <code>library</code></p>

<pre><code class="language-bash"># 部分执行结果
library
    library template (sub-template) to use (Default: spring-boot)
        spring-boot - Spring-boot Server application using the SpringFox integration.
        spring-mvc - Spring-MVC Server application using the SpringFox integration.
        spring-cloud - Spring-Cloud-Feign client with Spring-Boot auto-configured settings.
</code></pre>

<h4 id="langs"><code>langs</code></h4>

<p>查看支持的语言和框架</p>

<pre><code class="language-bash">java -jar swagger-codegen-cli-2.2.1.jar langs
</code></pre>

<p>执行结果</p>

<p>Available languages: [android, aspnet5, async-scala, cwiki, csharp, cpprest, dart, flash, python-flask, go, groovy, java, jaxrs, jaxrs-cxf, jaxrs-resteasy, jaxrs-spec, inflector, javascript, javascript-closure-angular, jmeter, nancyfx, nodejs-server, objc, perl, php, python, qt5cpp, ruby, scala, scalatra, silex-PHP, sinatra, rails5, slim, spring, dynamic-html, html, html2, swagger, swagger-yaml, swift, tizen, typescript-angular2, typescript-angular, typescript-node, typescript-fetch, akka-scala, CsharpDotNet2, clojure, haskell, lumen, go-server]</p>

<p>了解相关语言的配置帮助，可使用 <code>config-help</code> 命令。</p>

<h4 id="generate"><code>generate</code></h4>

<p><code>generate</code> 的作用是根据 API 文档生成代码，是<strong>最重要的命令</strong>。</p>

<p>首先查看 <code>generate</code> 命令的帮助信息：</p>

<pre><code class="language-bash">$ java -jar swagger-codegen-cli-2.2.1.jar help generate
</code></pre>

<p>概要，参数 <code>-i</code> 和 <code>-l</code> 是必要参数，其他参数可选。</p>

<pre><code class="language-bash">swagger-codegen-cli generate
        [(-a &lt;authorization&gt; | --auth &lt;authorization&gt;)]
        [--additional-properties &lt;additional properties&gt;]
        [--api-package &lt;api package&gt;] [--artifact-id &lt;artifact id&gt;]
        [--artifact-version &lt;artifact version&gt;]
        [(-c &lt;configuration file&gt; | --config &lt;configuration file&gt;)]
        [-D &lt;system properties&gt;] [--git-repo-id &lt;git repo id&gt;]
        [--git-user-id &lt;git user id&gt;] [--group-id &lt;group id&gt;]
        [--http-user-agent &lt;http user agent&gt;]
        (-i &lt;spec file&gt; | --input-spec &lt;spec file&gt;)
        [--import-mappings &lt;import mappings&gt;]
        [--instantiation-types &lt;instantiation types&gt;]
        [--invoker-package &lt;invoker package&gt;]
        (-l &lt;language&gt; | --lang &lt;language&gt;)
        [--language-specific-primitives &lt;language specific primitives&gt;]
        [--library &lt;library&gt;] [--model-name-prefix &lt;model name prefix&gt;]
        [--model-name-suffix &lt;model name suffix&gt;]
        [--model-package &lt;model package&gt;]
        [(-o &lt;output directory&gt; | --output &lt;output directory&gt;)]
        [--release-note &lt;release note&gt;] [(-s | --skip-overwrite)]
        [(-t &lt;template directory&gt; | --template-dir &lt;template directory&gt;)]
        [--type-mappings &lt;type mappings&gt;] [(-v | --verbose)]
</code></pre>

<p>部分参数解释</p>

<p><code>-i &lt;spec file&gt;, --input-spec &lt;spec file&gt;</code></p>

<p><strong>必须</strong> Swagger 规范文件的位置，可以是 url 也可以是文件的路径。</p>

<p><code>-l &lt;language&gt;, --lang &lt;language&gt;</code></p>

<p><strong>必须</strong> 所选的语言或框架</p>

<p><code>-o &lt;output directory&gt;, --output &lt;output directory&gt;</code></p>

<p>生成项目的位置，默认是当前目录</p>

<p><code>--library &lt;library&gt;</code></p>

<p>指定子模板，库模板</p>

<p><code>-c &lt;configuration file&gt;, --config &lt;configuration file&gt;</code></p>

<p>设置配置文件的路径，文件格式为 json ，如 <code>{&quot;optionKey&quot;:&quot;optionValue&quot;, &quot;optionKey1&quot;:&quot;optionValue1&quot;...}</code>。</p>

<p>不同语言的配置信息不同，使用 <code>config-help -l {lang}</code> 了解更多。</p>

<p><code>--api-package &lt;api package&gt;</code></p>

<p>设置 api 类的包名</p>

<p><code>--artifact-id &lt;artifact id&gt;</code></p>

<p>设置 pom.xml 中的 artifactId</p>

<p><code>--artifact-version &lt;artifact version&gt;</code></p>

<p>设置生成 pom.xml 中的 artifact version</p>

<p><code>--model-package &lt;model package&gt;</code></p>

<p>设置 models 的包名</p>

<p><code>--model-name-prefix &lt;model name prefix&gt;</code></p>

<p>model 的前缀，默认为空字符串</p>

<p><code>--model-name-suffix &lt;model name suffix&gt;</code></p>

<p>model 的后缀，默认为空字符串</p>

<p><code>--instantiation-types &lt;instantiation types&gt;</code></p>

<p>设置实例化类型的映射。格式为 <code>type=instantiatedType</code>，多个映射之间用逗号 <code>,</code> 隔开。</p>

<p>java 的一个例子: <code>array=ArrayList,map=HashMap</code>，<code>array</code> 类型在生成的代码中会实例化为 <code>ArrayList</code>。</p>

<p><code>--type-mappings &lt;type mappings&gt;</code></p>

<p>设置swagger规范类型和生成的代码类型之间的映射。例如 <code>array=List,map=Map,string=String</code>。</p>

<p>不了解 <code>instantiation-types</code> 和 <code>type-mappings</code> 的区别，待解。</p>

<p><strong>样例：</strong></p>

<p>Github wiki 上的 <a href="https://github.com/swagger-api/swagger-codegen/wiki/Server-stub-generator-HOWTO">《Server stub generator HOWTO》</a>，列举了生成多种语言框架 server 的命令。但是一些并不那么好使，比如 spring-mvc。</p>

<p>wiki 例子：</p>

<pre><code class="language-bash">java -jar modules/swagger-codegen-cli/target/swagger-codegen-cli.jar generate \
  -i http://petstore.swagger.io/v2/swagger.json \
  -l spring-mvc \
  -o samples/server/petstore/spring-mvc
</code></pre>

<p>但是实际上，在 Swagger codegen v2.2.0 中 spring-mvc 被删掉了，但是作为了 spring 的一个非默认库，spring-boot 作为其默认库。</p>

<p>具体细节</p>

<ul>
<li>更新日志 <a href="https://github.com/swagger-api/swagger-codegen/releases/tag/v2.2.0">https://github.com/swagger-api/swagger-codegen/releases/tag/v2.2.0</a></li>
<li><a href="https://github.com/swagger-api/swagger-codegen/pull/3133">[Spring] put spring-mvc and spring-boot under the same language gen #3133</a></li>
</ul>

<p>现在创建 spring-mvc ，应该这样：</p>

<pre><code class="language-bash">java -jar swagger-codegen-cli-2.2.1.jar generate -i swagger.yaml -l spring --library spring-mvc
</code></pre>

<h3 id="swagger-codegen-总结">Swagger codegen 总结</h3>

<p>Swagger codegen 作用就是根据 json 或 yaml 格式的 API 文档来生成代码。</p>

<p>基本掌握级别是会使用 <code>generate</code> 。</p>

<p>其他进阶，如自定义模板、添加新的语言框架、工作流集成等等，可以看Github 上的 <a href="https://github.com/swagger-api/swagger-codegen/blob/master/README.md">README</a> 或 <a href="https://github.com/swagger-api/swagger-codegen/wiki">wiki</a>。</p>

<p>当然最简单的生成，可以在 Swagger Editore 中使用 Generate Server 和 Generate Client。只是不如命令操作仔细。还有，在 Swagger codegen 的 Github 项目中 <code>bin</code> 目录下有很多可用的脚本，可根据需要修改使用。</p>

<h3 id="参考-1">参考</h3>

<ul>
<li><a href="https://github.com/swagger-api/swagger-codegen">Swagger Codegen Gtihub 项目</a></li>
<li><a href="https://github.com/swagger-api/swagger-codegen/wiki">Swagger Codegen Gtihub Wiki</a></li>
<li><a href="https://javaarm.com/faces/display.xhtml;jsessionid=dkH9tZqNyijEI4XCAbpWtmV0?tid=3915">Swagger Code Generator v2.1.5 README 中文翻译</a></li>
<li><a href="https://github.com/swagger-api/swagger-codegen/pull/3133">[Spring] put spring-mvc and spring-boot under the same language gen #3133</a></li>
<li><a href="http://blog.csdn.net/wangjunjun2008/article/details/53200437">swagger-codegen生成java客户端代码（其他语言类似）</a></li>
</ul>

<h2 id="swagger-ui">Swagger UI</h2>

<p>Swagger UI  将 API 文档在浏览器中可视化。</p>

<p>官方的 Demo ，地址：<a href="http://petstore.swagger.io/">http://petstore.swagger.io/</a>。截图：</p>

<p><img src="https://ox.xizero.com/uploads/2017/02/swagger_ui.png" alt="" /></p>

<h3 id="安装-2">安装</h3>

<p>可以从 <a href="https://github.com/swagger-api/swagger-ui">Github</a> 下载项目，打开 <code>./dist/index.html</code> 直接运行。</p>

<p>关于 <code>Build</code> 项目和在 <code>docker</code>  中运行，暂不了解。</p>

<p>可以编辑 <code>index.html</code> ，对 <code>swaggerUi</code> 对象自定义属性。</p>

<p>相关属性，参阅 ： <a href="https://github.com/swagger-api/swagger-ui#swaggerui">https://github.com/swagger-api/swagger-ui#swaggerui</a></p>

<p>重要属性解释：</p>

<ul>
<li>url  设置默认文档路径</li>
<li>docExpansion 控制列表显示：默认 none - 完全隐藏；list - 显示路径的操作列表；full - 完全展开</li>
</ul>

<p>中文翻译设置，在 <code>index.html</code> 中 30 行左右，去掉注释代码，修改为：</p>

<pre><code class="language-html">&lt;script src='lang/translator.js' type='text/javascript'&gt;&lt;/script&gt;
&lt;script src='lang/zh-cn.js' type='text/javascript'&gt;&lt;/script&gt;
</code></pre>

<h3 id="cors-支持">CORS 支持</h3>

<p>关于 CORS 请看另一篇。</p>

<h3 id="参考-2">参考</h3>

<ul>
<li><a href="https://github.com/swagger-api/swagger-ui">https://github.com/swagger-api/swagger-ui</a></li>
</ul>

<h2 id="学习-swagger-的总结">学习 Swagger 的总结</h2>

<p>Saggger 是世界上最流行的的 API 框架，提供了 API 设计、构建和展示的工具。但是相关的资料也有限，大概入了个门。</p>

<p>关于 Swagger 的更多相关开源项目，可以在 <a href="http://swagger.io/open-source-integrations/">http://swagger.io/open-source-integrations/</a> 查看。</p>

<p>下一篇，学习如何从代码生成 API 文档 - SPringFox。</p>

</div>


<div class="boo">
	<span></span>
</div>
<div class="footer">
	@XIZERO Powered by <a href="http://hugo.spf13.com/">Hugo</a> and <a href="#">bigbig</a>
</div>
</body>
</html>

