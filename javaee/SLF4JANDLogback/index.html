<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.18.1" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="alternate" href="https://www.xizero.com//index.xml" type="application/rss+xml" title="XIZERO">
<link href="https://www.xizero.com/css/tomorrow.min.css" rel="stylesheet">
<link href="https://www.xizero.com/css/main.css" rel="stylesheet">
<link href="https://www.xizero.com/css/context.css" rel="stylesheet">
<link href="https://www.xizero.com/css/jqcloud.css" rel="stylesheet">
<script src="https://www.xizero.com/js/high.min.js"></script>
<script src="https://www.xizero.com/js/jqury.min.js"></script>
<script src="https://www.xizero.com/js/top.js"></script>
<script src="https://www.xizero.com/js/jqcloud.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<title>SLF4J å’Œ Logback - XIZERO</title>
</head>
<body>

<div id="gotop" title="ğŸš€ go top"></div>

<div class="top">

	<div class="gos">
		<span class="go"><a href="https://www.xizero.com/">Home</a></span>
		<span class="go"><a href="/tags/">Tags</a></span>
		<span class="go"><a href="/about/">About</a></span>
	</div>
	
	
		<div class="tit">
			SLF4J å’Œ Logback
		</div>

	

</div>




<div class="con">
	

<h1 id="slf4j-simple-logging-facade-for-java">SLF4J - - Simple Logging Facade for Java</h1>

<p>å®˜ç½‘ï¼š<a href="https://www.slf4j.org/">https://www.slf4j.org/</a></p>

<h2 id="hello-world">Hello World</h2>

<pre><code class="language-java">public class Slf4jTest {  
    static private Logger logger = LoggerFactory.getLogger(Slf4jTest.class);  
    public static void main(String[] args) {  
        logger.info(&quot;Hello World {}&quot;,&quot;!&quot;)  
    }  
}  
</code></pre>

<p>æ›´å¤šæ¨èé˜…è¯» ï¼š</p>

<ul>
<li><a href="https://my.oschina.net/wangxindong/blog/825066">é—¨é¢ä¹‹ä¸‹ï¼Œæ—¥å¿—ä¹‹ä¸Š-SLF4J</a></li>
<li><a href="http://ifeve.com/?x=0&amp;y=0&amp;s=slf4j">å¹¶å‘ç¼–ç¨‹ç½‘</a></li>
</ul>

<h1 id="logback">Logback</h1>

<p>å®˜ç½‘ï¼š<a href="https://logback.qos.ch/">https://logback.qos.ch/</a></p>

<p>logbackåˆ†ä¸ºä¸‰ä¸ªæ¨¡å—</p>

<ul>
<li>logback-core

<ul>
<li>ä¸ºå…¶ä»–ä¸¤ä¸ªæ¨¡å—æ‰“ä¸‹äº†åŸºç¡€</li>
</ul></li>
<li>logback-classic

<ul>
<li>å¯ä»¥è¢«çœ‹åšä¸ªæœ‰æ˜¾è‘—æ”¹è¿›çš„log4J</li>
<li>å®ç°äº† SLF4J API</li>
</ul></li>
<li>logback-access

<ul>
<li>â€‹â€‹ä¸Servletå®¹å™¨ï¼ˆä¾‹å¦‚Tomcatå’ŒJettyï¼‰é›†æˆï¼Œä»¥æä¾›HTTPè®¿é—®æ—¥å¿—åŠŸèƒ½</li>
</ul></li>
</ul>

<h2 id="æ—¥å¿—çº§åˆ«">æ—¥å¿—çº§åˆ«</h2>

<p>åŸåœ°å€ï¼š<a href="https://zh.wikipedia.org/wiki/Log4j">https://zh.wikipedia.org/wiki/Log4j</a></p>

<p>å¸¸ç”¨çº§åˆ«ç”±ä½åˆ°é«˜ï¼Œä¾æ¬¡ä¸º Trace &lt; Debug &lt; Tnfo &lt; Warn &lt; Error</p>

<table>
<thead>
<tr>
<th>çº§åˆ«</th>
<th>æè¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td>OFF</td>
<td>æœ€é«˜çº§åˆ«ï¼Œç”¨äºå…³é—­æ—¥å¿—è®°å½•ã€‚</td>
</tr>

<tr>
<td>FATAL</td>
<td>å¯¼è‡´åº”ç”¨ç¨‹åºæå‰ç»ˆæ­¢çš„ä¸¥é‡é”™è¯¯ã€‚ä¸€èˆ¬è¿™äº›ä¿¡æ¯å°†ç«‹å³å‘ˆç°åœ¨çŠ¶æ€æ§åˆ¶å°ä¸Šã€‚</td>
</tr>

<tr>
<td>ERROR</td>
<td>å…¶ä»–è¿è¡Œæ—¶é”™è¯¯æˆ–æ„å¤–æƒ…å†µã€‚ä¸€èˆ¬è¿™äº›ä¿¡æ¯å°†ç«‹å³å‘ˆç°åœ¨çŠ¶æ€æ§åˆ¶å°ä¸Šã€‚</td>
</tr>

<tr>
<td>WARN</td>
<td>ä½¿ç”¨å·²è¿‡æ—¶çš„APIï¼ŒAPIçš„æ»¥ç”¨ï¼Œæ½œåœ¨é”™è¯¯ï¼Œå…¶ä»–ä¸è‰¯çš„æˆ–æ„å¤–çš„è¿è¡Œæ—¶çš„çŠ¶å†µï¼ˆä½†ä¸ä¸€å®šæ˜¯é”™è¯¯çš„ï¼‰ã€‚ä¸€èˆ¬è¿™äº›ä¿¡æ¯å°†ç«‹å³å‘ˆç°åœ¨çŠ¶æ€æ§åˆ¶å°ä¸Šã€‚</td>
</tr>

<tr>
<td>INFO</td>
<td>ä»¤äººæ„Ÿå…´è¶£çš„è¿è¡Œæ—¶äº‹ä»¶ï¼ˆå¯åŠ¨/å…³é—­ï¼‰ã€‚ä¸€èˆ¬è¿™äº›ä¿¡æ¯å°†ç«‹å³å‘ˆç°åœ¨çŠ¶æ€æ§åˆ¶å°ä¸Šï¼Œå› è€Œè¦ä¿å®ˆä½¿ç”¨ï¼Œå¹¶ä¿æŒåˆ°æœ€ä½é™åº¦ã€‚</td>
</tr>

<tr>
<td>DEBUG</td>
<td>æµç»ç³»ç»Ÿçš„è¯¦ç»†ä¿¡æ¯ã€‚ä¸€èˆ¬è¿™äº›ä¿¡æ¯åªè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</td>
</tr>

<tr>
<td>TRACE</td>
<td>æœ€è¯¦ç»†çš„ä¿¡æ¯ã€‚ä¸€èˆ¬è¿™äº›ä¿¡æ¯åªè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</td>
</tr>
</tbody>
</table>

<h2 id="logback-xml-é…ç½®">logback.xml é…ç½®</h2>

<p><img src="https://ox.xizero.com/uploads/2017/02/Logback.xml.svg" alt="" /></p>

<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>

<h3 id="1-pox-xml-æ·»åŠ ä¾èµ–">1.pox.xml æ·»åŠ ä¾èµ–</h3>

<p>ä»“åº“åœ°å€ï¼š<a href="https://mvnrepository.com/artifact/ch.qos.logback/logback-classic">https://mvnrepository.com/artifact/ch.qos.logback/logback-classic</a></p>

<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
    &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- ä½¿ç”¨æ±‚å€¼è¡¨è¾¾å¼è¿‡æ»¤ï¼Œéœ€è¦æ·»åŠ  janino ä¾èµ–--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;
    &lt;artifactId&gt;janino&lt;/artifactId&gt;
    &lt;version&gt;3.0.6&lt;/version&gt;
&lt;/dependency&gt;

</code></pre>

<h3 id="2-src-main-resourceæ·»åŠ logback-xml">2.src/main/resourceæ·»åŠ logback.xml</h3>

<p>å‚è€ƒï¼š<a href="https://gist.githubusercontent.com/f12998765/28613af391c72c8c8ba47a0cef3f8250/raw/d1af5d48490308dd80645f9721e1af2b7cd6f69f/logback.xml">logback.xml</a></p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
        &lt;!-- é¡¹ç›®åç§° --&gt;
        &lt;contextName&gt;Test contextName&lt;/contextName&gt;

        &lt;!-- å˜é‡ --&gt;
        &lt;property name=&quot;log&quot; value=&quot;./log&quot;/&gt;

        &lt;!-- æ—¶é—´æˆ³ --&gt;
        &lt;timestamp key=&quot;bySecond&quot; datePattern=&quot;yyyyMMdd&quot; timeReference=&quot;contextBirth&quot;/&gt;

        &lt;!-- åœ¨æ§åˆ¶å°æ‰“å°æ—¥å¿— --&gt;
        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;

                &lt;!-- çº§åˆ«è¿‡æ»¤å™¨ --&gt;
                &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
                        &lt;level&gt;DEBUG&lt;/level&gt;
                        &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                        &lt;onMismatch&gt;NEUTRAL&lt;/onMismatch&gt;
                &lt;/filter&gt;

                &lt;!-- ä¸´ç•Œå€¼è¿‡æ»¤å™¨ --&gt;
                &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
                        &lt;level&gt;INFO&lt;/level&gt;
                        &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                        &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
                &lt;/filter&gt;


                &lt;!-- æ±‚å€¼è¿‡æ»¤å™¨ --&gt;
                &lt;filter class=&quot;ch.qos.logback.core.filter.EvaluatorFilter&quot;&gt;
                        &lt;evaluator&gt;
                                &lt;matcher&gt;
                                        &lt;name&gt;num&lt;/name&gt;
                                        &lt;regex&gt;\ba\w*\b&lt;/regex&gt;
                                &lt;/matcher&gt;
                                &lt;expression&gt; num.matches(formattedMessage) &lt;/expression&gt;
                        &lt;/evaluator&gt;
                        &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                        &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
                &lt;/filter&gt;

                &lt;encoder&gt;
                        &lt;!-- patternæ¨¡å¼ %dæ—¶é—´ %thread çº¿ç¨‹å %levelè¡Œä¸ºçº§åˆ« %logger loggeråç§° %method æ–¹æ³•åç§° %message è°ƒç”¨æ–¹æ³•çš„å…¥å‚æ¶ˆæ¯ --&gt;
                        &lt;pattern&gt;%-4d [%thread] %highlight%-5level %cyan%logger.%-10method - %message%n&lt;/pattern&gt;
                &lt;/encoder&gt;
        &lt;/appender&gt;

        &lt;!-- FileAppender è¾“å‡ºåˆ°æ–‡ä»¶ --&gt;
        &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;

                &lt;file&gt;${log}/log-${bySecond}.log&lt;/file&gt;

                &lt;encoder&gt;
                        &lt;pattern&gt;%date %level [%thread] %logger{30} [%file:%line] %msg%n&lt;/pattern&gt;
                &lt;/encoder&gt;
        &lt;/appender&gt;


        &lt;!-- æ»šåŠ¨è®°å½•æ—¥å¿—æ–‡ä»¶ --&gt;
        &lt;!-- æŒ‰æ—¶é—´æ»šåŠ¨ --&gt;
        &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
                &lt;file&gt;${log}/test_log.log&lt;/file&gt;
                &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;
                        &lt;!-- daily rollover --&gt;
                        &lt;fileNamePattern&gt;${log}/log.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;

                        &lt;!-- keep 30 days' worth of history capped at 3GB total size --&gt;
                        &lt;maxHistory&gt;30&lt;/maxHistory&gt;
                        &lt;totalSizeCap&gt;3GB&lt;/totalSizeCap&gt;
                &lt;/rollingPolicy&gt;

                &lt;encoder&gt;
                        &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt;
                &lt;/encoder&gt;
        &lt;/appender&gt;

        &lt;!-- Size and time based rolling policy --&gt;
        &lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
                &lt;file&gt;${log}/test_log.log&lt;/file&gt;
                &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
                        &lt;!-- rollover daily --&gt;
                        &lt;fileNamePattern&gt;${log}/log.%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                        &lt;!-- each file should be at most 100MB, keep 60 days worth of history, but at most 20GB --&gt;
                        &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;    
                        &lt;maxHistory&gt;60&lt;/maxHistory&gt;
                        &lt;totalSizeCap&gt;20GB&lt;/totalSizeCap&gt;
                &lt;/rollingPolicy&gt;
                &lt;encoder&gt;
                        &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt;
                &lt;/encoder&gt;
        &lt;/appender&gt;

        &lt;!-- æŒ‰çª—å£æ»šåŠ¨ --&gt;
        &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
                &lt;file&gt;${log}/test_log.log&lt;/file&gt;

                &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&quot;&gt;
                        &lt;fileNamePattern&gt;${log}/log.%i.log.zip&lt;/fileNamePattern&gt;
                        &lt;minIndex&gt;1&lt;/minIndex&gt;
                        &lt;maxIndex&gt;3&lt;/maxIndex&gt;
                &lt;/rollingPolicy&gt;

                &lt;triggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;&gt;
                        &lt;maxFileSize&gt;5MB&lt;/maxFileSize&gt;
                &lt;/triggeringPolicy&gt;

                &lt;encoder&gt;
                        &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt;
                &lt;/encoder&gt;
        &lt;/appender&gt;


        &lt;!-- logger --&gt;
        &lt;logger name=&quot;log.test&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;
                &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;
                &lt;appender-ref ref=&quot;ROLLINGFILE&quot;/&gt;
                &lt;appender-ref ref=&quot;HTMLFILE&quot;/&gt;
        &lt;/logger&gt;

        &lt;logger name=&quot;log.test.Tesg&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;
                &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;
                &lt;appender-ref ref=&quot;ROLLINGFILE&quot;/&gt;
                &lt;appender-ref ref=&quot;HTMLFILE&quot;/&gt;
        &lt;/logger&gt;

        &lt;root level=&quot;debug&quot;&gt;
                &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;
        &lt;/root&gt;

&lt;/configuration&gt;
</code></pre>

<h2 id="å¤‡æ³¨">å¤‡æ³¨</h2>

<h3 id="æ—¶é—´æ»šåŠ¨">æ—¶é—´æ»šåŠ¨</h3>

<p>TimeBasedRollingPolicy æœ€å¸¸ç”¨çš„æ»šåŠ¨ç­–ç•¥ï¼Œå®ƒæ ¹æ®æ—¶é—´æ¥åˆ¶å®šæ»šåŠ¨ç­–ç•¥ï¼Œæ—¢è´Ÿè´£æ»šåŠ¨ä¹Ÿè´Ÿè´£è§¦å‘æ»šåŠ¨</p>

<h3 id="æ—¥æœŸç›¸å…³">æ—¥æœŸç›¸å…³</h3>

<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>æ„ä¹‰</th>
</tr>
</thead>

<tbody>
<tr>
<td>G</td>
<td>å¹´ä»£æ ‡å¿—ç¬¦</td>
</tr>

<tr>
<td>y</td>
<td>å¹´</td>
</tr>

<tr>
<td>M</td>
<td>æœˆ</td>
</tr>

<tr>
<td>d</td>
<td>æ—¥</td>
</tr>

<tr>
<td>h</td>
<td>æ—¶ åœ¨ä¸Šåˆæˆ–ä¸‹åˆ (1~12)</td>
</tr>

<tr>
<td>H</td>
<td>æ—¶ åœ¨ä¸€å¤©ä¸­ (0~23)</td>
</tr>

<tr>
<td>m</td>
<td>åˆ†</td>
</tr>

<tr>
<td>s</td>
<td>ç§’</td>
</tr>

<tr>
<td>S</td>
<td>æ¯«ç§’</td>
</tr>

<tr>
<td>E</td>
<td>æ˜ŸæœŸ</td>
</tr>

<tr>
<td>D</td>
<td>ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©</td>
</tr>

<tr>
<td>F</td>
<td>ä¸€æœˆä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸå‡ </td>
</tr>

<tr>
<td>w</td>
<td>ä¸€å¹´ä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸ</td>
</tr>

<tr>
<td>W</td>
<td>ä¸€æœˆä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸ</td>
</tr>

<tr>
<td>a</td>
<td>ä¸Šåˆ / ä¸‹åˆ æ ‡è®°ç¬¦</td>
</tr>

<tr>
<td>k</td>
<td>æ—¶ åœ¨ä¸€å¤©ä¸­ (1~24)</td>
</tr>

<tr>
<td>K</td>
<td>æ—¶ åœ¨ä¸Šåˆæˆ–ä¸‹åˆ (0~11)</td>
</tr>

<tr>
<td>z</td>
<td>æ—¶åŒº</td>
</tr>
</tbody>
</table>

<h3 id="0-9-19ç‰ˆæœ¬ä¹‹å-æ¨èä½¿ç”¨encode">0.9.19ç‰ˆæœ¬ä¹‹åï¼Œæ¨èä½¿ç”¨encode</h3>

<p>åŸå› ï¼š <a href="https://logback.qos.ch/codes.html#layoutInsteadOfEncoder">https://logback.qos.ch/codes.html#layoutInsteadOfEncoder</a></p>

<h3 id="size-and-time-based-rolling-policy">Size and time based rolling policy</h3>

<p>åŸåœ°å€ï¼š<a href="https://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedFNATP">https://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedFNATP</a></p>

<pre><code class="language-xml">&lt;configuration&gt;
  &lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
    &lt;file&gt;mylog.txt&lt;/file&gt;
    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
      &lt;!-- rollover daily --&gt;
      &lt;fileNamePattern&gt;mylog-%d{yyyy-MM-dd}.%i.txt&lt;/fileNamePattern&gt;
       &lt;!-- each file should be at most 100MB, keep 60 days worth of history, but at most 20GB --&gt;
       &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;    
       &lt;maxHistory&gt;60&lt;/maxHistory&gt;
       &lt;totalSizeCap&gt;20GB&lt;/totalSizeCap&gt;
    &lt;/rollingPolicy&gt;
    &lt;encoder&gt;
      &lt;pattern&gt;%msg%n&lt;/pattern&gt;
    &lt;/encoder&gt;
  &lt;/appender&gt;
  &lt;root level=&quot;DEBUG&quot;&gt;
    &lt;appender-ref ref=&quot;ROLLING&quot; /&gt;
  &lt;/root&gt;
&lt;/configuration&gt;
</code></pre>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
<li><a href="http://www.cnblogs.com/jingmoxukong/p/5910309.html">ç»†è¯´Javaä¸»æµæ—¥å¿—å·¥å…·åº“</a></li>
<li><a href="https://my.oschina.net/wangxindong/blog/825066">é—¨é¢ä¹‹ä¸‹ï¼Œæ—¥å¿—ä¹‹ä¸Š-SLF4J</a></li>
<li><a href="http://ifeve.com/?x=0&amp;y=0&amp;s=slf4j">å¹¶å‘ç¼–ç¨‹ç½‘</a></li>
<li><a href="http://blog.csdn.net/huozhonbin/article/category/1656017">LogBackå­¦ä¹ è®°å½•</a></li>
<li><a href="http://czj4451.iteye.com/blog/1974831">logbackç³»åˆ—</a></li>
<li><a href="http://aub.iteye.com/category/161103">aubdiy - log</a></li>
</ul>

</div>


<div class="boo">
	<span></span>
</div>
<div class="footer">
	@XIZERO Powered by <a href="http://hugo.spf13.com/">Hugo</a> and <a href="#">bigbig</a>
</div>
</body>
</html>

