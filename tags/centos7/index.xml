<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>XIZERO</title>
    <link>http://f12998765.github.io/tags/centos7/index.xml</link>
    <description>Recent content on XIZERO</description>
    <generator>Hugo -- gohugo.io</generator>
    <atom:link href="http://f12998765.github.io/tags/centos7/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>在Centos7中安装 PPTP VPN</title>
      <link>http://f12998765.github.io/notes/pptp/</link>
      <pubDate>Mon, 05 Dec 2016 19:56:31 +0800</pubDate>
      
      <guid>http://f12998765.github.io/notes/pptp/</guid>
      <description>

&lt;blockquote&gt;
&lt;p&gt;这篇文章只是简单的记录&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;安装软件&#34;&gt;安装软件&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yum install ppp pptpd
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;配置pptp&#34;&gt;配置PPTP&lt;/h2&gt;

&lt;h3 id=&#34;etc-pptpd-conf&#34;&gt;/etc/pptpd.conf&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;vim /etc/pptpd.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查找localip和remoteip，去掉前面的注释“#”，结果如下&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;localip 192.168.0.1
remoteip 192.168.0.234-238,192.168.0.245
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;etc-ppp-options-pptpd&#34;&gt;/etc/ppp/options/pptpd&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;vim /etc/ppp/options/pptpd
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查找”ms-dns”,去掉注释”#”,结果如下&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ms-dns 8.8.8.8
ms-dns 8.8.4.4
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;etc-ppp-chap-secrets&#34;&gt;/etc/ppp/chap-secrets&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;vim /etc/ppp/chap-secrets
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;添加连接账户,格式如下&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;用户名 pptpd 密码 *
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;etc-sysctl-conf&#34;&gt;/etc/sysctl.conf&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;vim /etc/sysctl.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在最后添加&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;net.ipv4.ip_forward=1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;终端运行&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sysctl -p
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;配置firewalld&#34;&gt;配置Firewalld&lt;/h2&gt;

&lt;p&gt;启动 Firewalld&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;systemctl start  firewalld
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;运行&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -i eth0 -p tcp --dport 1723 -j ACCEPT
firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 0 -p gre -j ACCEPT
firewall-cmd --permanent --direct --add-rule ipv4 filter POSTROUTING 0 -t nat -o eth0 -j MASQUERADE
firewall-cmd --permanent --direct --add-rule ipv4 filter FORWARD 0 -i ppp+ -o eth0 -j ACCEPT
firewall-cmd --permanent --direct --add-rule ipv4 filter FORWARD 0 -i eth0 -o ppp+ -j ACCEPT
firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;启动pptp&#34;&gt;启动PPTP&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;#启动
systemctl start pptpd

#重启
systemctl restart pptpd
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;参考资料&#34;&gt;参考资料&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.wanghailin.cn/centos-7-vpn/&#34;&gt;Centos 7搭建VPN（PPTP）服务器方法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.lightning-ashe.com/develop/setup-pptp-server-on-centos/&#34;&gt;Setup PPTP Server on CentOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://feiio.com/2016/05/15/CentOS7-0%E6%90%AD%E5%BB%BAVPN-PPTP-%E6%9C%8D%E5%8A%A1%E5%99%A8/&#34;&gt;CentOS7.0搭建VPN(PPTP)服务器&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>