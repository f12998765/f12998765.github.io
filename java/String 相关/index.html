<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.18.1" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="alternate" href="https://www.xizero.com//index.xml" type="application/rss+xml" title="XIZERO">
<link href="https://www.xizero.com/css/block.css" rel="stylesheet">
<script src="https://www.xizero.com/js/jqury.min.js"></script>
<script src="https://www.xizero.com/js/top.js"></script>


<title>String ç›¸å…³ - XIZERO</title>
</head>
<body>

<div id="gotop" title="ğŸš€ go top"></div>


<div class="titlist">
	<span><a href="https://www.xizero.com/">Home</a></span>
	<span><a href="https://www.xizero.com//tags/">Tags</a></span>
	<span><a href="https://www.xizero.com//about">About</a></span>
</div>



<link href="https://www.xizero.com/css/context.css" rel="stylesheet">
<link href="https://www.xizero.com/css/tomorrow.min.css" rel="stylesheet">
<script src="https://www.xizero.com/js/high.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<div class="tit">
	String ç›¸å…³
</div>

<div class="toc">
	<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#string-æˆå‘˜å˜é‡">String æˆå‘˜å˜é‡</a></li>
<li><a href="#å¸¸é‡æ± ">å¸¸é‡æ± </a>
<ul>
<li><a href="#åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡">åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</a></li>
<li><a href="#string">String +</a></li>
</ul></li>
<li><a href="#string-intern">String.intern()</a></li>
<li><a href="#string-substring">String.substring()</a></li>
<li><a href="#å¤‡æ³¨">å¤‡æ³¨</a></li>
<li><a href="#å‚è€ƒè¿æ¥">å‚è€ƒè¿æ¥</a></li>
</ul></li>
</ul>
</nav>
</div>

<div class="con">
	

<h2 id="string-æˆå‘˜å˜é‡">String æˆå‘˜å˜é‡</h2>

<p>String æ˜¯å…¸å‹çš„<a href="http://www.cnblogs.com/java-my-life/archive/2012/05/08/2487757.html">ä¸å˜æ¨¡å¼è®¾è®¡</a></p>

<p><a href="http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/String.java?av=f">JDK 8 æºç åœ°å€</a></p>

<p><a href="http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b27/java/lang/String.java?av=f">JDK 6 æºç åœ°å€</a></p>

<pre><code class="language-java">
//JDK 1.8
public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence {
    //The value is used for character storage.
    private final char value[];

    //Cache the hash code for the string
    private int hash; // Default to 0
}

//JDK1.6
public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence{
    //The value is used for character storage.
    private final char value[];

    //The offset is the first index of the storage that is used.
    private final int offset;

    //The count is the number of characters in the String.
    private final int count;

    //Cache the hash code for the string
    private int hash; // Default to 0
}
</code></pre>

<h2 id="å¸¸é‡æ± ">å¸¸é‡æ± </h2>

<p>javaç¼–è¯‘æ—¶ä¼šç”Ÿæˆå¸¸é‡æ± ï¼ˆConstant poolï¼‰ï¼Œä¿å­˜å­—é¢å¸¸é‡å’Œç¬¦å·å¼•ç”¨ï¼ˆç±»åã€æ–¹æ³•åã€æ¥å£åå’Œå­—æ®µåç­‰ï¼‰ã€‚</p>

<h3 id="åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡">åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</h3>

<ul>
<li>new è¿ç®—ç¬¦</li>
<li>å­—ç¬¦ä¸²å¸¸é‡</li>
<li>&rdquo;+&ldquo;è¿æ¥çš„è¡¨è¾¾å¼</li>
</ul>

<p>ç›¸åŒçš„å­—ç¬¦ä¸²å¸¸é‡æˆ–ç»“æœç›¸åŒçš„å­—ç¬¦ä¸²å¸¸é‡è¡¨è¾¾å¼åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡æ—¶ï¼Œ
å¦‚æœå¸¸é‡æ± ä¸­å·²ç»å­˜åœ¨ï¼Œç›¸åŒåºåˆ—çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¯¥å¯¹è±¡ç›´æ¥æŒ‡å‘ï¼›ä¸å­˜åœ¨æ—¶ï¼Œä¼šåœ¨å¸¸é‡æ± åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚</p>

<pre><code class="language-java">String a1 = &quot;abc&quot;;
String a2 = &quot;abc&quot;;
String a3 = &quot;a&quot;+&quot;bc&quot;;
System,out.println(a1==a2+&quot;\t&quot;+a2==a3); //true true
</code></pre>

<p>å› ä¸ºå­—ç¬¦ä¸²åºåˆ—ç›¸åŒï¼ŒæŒ‡å‘çš„å¸¸é‡æ± ä¸­åŒä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸ºtrueã€‚</p>

<p>ä½¿ç”¨ new åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡æ—¶ï¼Œä¼šåœ¨å †ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ï¼Œå¹¶ä¸”è¯¥Stringå¯¹è±¡çš„char value[]ä¼šæŒ‡å‘å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºã€‚</p>

<pre><code class="language-java">
String b1 = new String(&quot;abc&quot;);
String b2 = new String(&quot;abc&quot;);
System.out.println(b1==b2); //false
</code></pre>

<p>ä½¿ç”¨newä¼šåœ¨å †ä¸­åˆ›å»ºæ–°çš„å¯¹è±¡,åœ°å€å½“ç„¶ä¸åŒ.</p>

<h3 id="string">String +</h3>

<ul>
<li>&rdquo; &ldquo;+[String] æˆ– [String]+[String]</li>
</ul>

<p>ä¼šåœ¨ç¼–è¯‘æ—¶,è°ƒç”¨StringBuilderçš„append()å’ŒtoString(),æœ€ç»ˆæŒ‡å‘çš„æ˜¯å †ä¸Šæ–°åˆ›å»ºçš„Stringå¯¹è±¡.</p>

<pre><code class="language-java">String c1 = &quot;abc&quot;;
String c2 = &quot;123&quot;+c1;
String c3 = &quot;123abc&quot;;
System.out.println(c2==c3); //false
</code></pre>

<ul>
<li><p>&rdquo; &ldquo;+&rdquo; &ldquo;</p></li>

<li><p>[final String]+[final String] æˆ– [final String]+&rdquo; &ldquo;</p></li>
</ul>

<p>å½“finalä¿®é¥°çš„å¯¹è±¡å‘ç”Ÿè¿æ¥åŠ¨ä½œæ—¶ï¼Œè™šæ‹Ÿæœºä¼šè¿›è¡Œä¼˜åŒ–ï¼Œå°†è¡¨è¾¾å¼ç»“æœç›´æ¥èµ‹å€¼ç»™ç›®æ ‡å˜é‡.</p>

<pre><code class="language-java">final String a = &quot;hello &quot;;
final String b = &quot;world&quot;;
String c = a + &quot;world&quot;;
String d = &quot;hello world&quot;;
System.out.println(c==d); //true
</code></pre>

<h2 id="string-intern">String.intern()</h2>

<p>æ˜¯ä¸€ä¸ª Native æ–¹æ³•ï¼Œè°ƒç”¨ C++çš„ StringTable::intern</p>

<p>å¦‚æœå¸¸é‡æ± ä¸­å·²ç»å­˜åœ¨è¯¥å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›æ± ä¸­çš„å­—ç¬¦ä¸²ï¼›å¦åˆ™å°†æ­¤å­—ç¬¦ä¸²æ·»åŠ åˆ°å¸¸é‡æ± ä¸­ï¼Œå¹¶è¿”å›å¼•ç”¨ã€‚</p>

<h2 id="string-substring">String.substring()</h2>

<pre><code class="language-java">//JDK1.6
public String substring(int beginIndex) {
    return substring(beginIndex, count);
}
public String substring(int beginIndex, int endIndex) {
    if (beginIndex &lt; 0) {
        throw new StringIndexOutOfBoundsException(beginIndex);
    }
    if (endIndex &gt; count) {
        throw new StringIndexOutOfBoundsException(endIndex);
    }
    if (beginIndex &gt; endIndex) {
        throw new StringIndexOutOfBoundsException(endIndex - beginIndex);
    }
    return ((beginIndex == 0) &amp;&amp; (endIndex == count)) ? this :
        new String(offset + beginIndex, endIndex - beginIndex, value);
}

String(int offset, int count, char value[]) {
    this.value = value;
    this.offset = offset;
    this.count = count;
}
</code></pre>

<p>JDK1.6 ä¸­çš„å®ç°åªæ˜¯è°ƒæ•´äº† offset å’Œ count ,ä½¿ç”¨çš„æ˜¯å…±äº«çš„å­—ç¬¦æ•°ç»„ã€‚</p>

<p>å½“ä½¿ç”¨substringæˆªå–ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²çš„2ä¸ªå­—ç¬¦æ—¶ï¼Œä¼šå ç”¨è¿™ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œä¸èƒ½åƒåœ¾å›æ”¶ã€‚</p>

<pre><code class="language-java">//JDK 1.8
public String substring(int beginIndex) {
        if (beginIndex &lt; 0) {
            throw new StringIndexOutOfBoundsException(beginIndex);
        }
        int subLen = value.length - beginIndex;
        if (subLen &lt; 0) {
            throw new StringIndexOutOfBoundsException(subLen);
        }
        return (beginIndex == 0) ? this : new String(value, beginIndex, subLen);
}

public String substring(int beginIndex, int endIndex) {
        if (beginIndex &lt; 0) {
            throw new StringIndexOutOfBoundsException(beginIndex);
        }
        if (endIndex &gt; value.length) {
            throw new StringIndexOutOfBoundsException(endIndex);
        }
        int subLen = endIndex - beginIndex;
        if (subLen &lt; 0) {
            throw new StringIndexOutOfBoundsException(subLen);
        }
        return ((beginIndex == 0) &amp;&amp; (endIndex == value.length)) ? this : new String(value, beginIndex, subLen);
}

public String(char value[], int offset, int count) {
        if (offset &lt; 0) {
            throw new StringIndexOutOfBoundsException(offset);
        }
        if (count &lt; 0) {
            throw new StringIndexOutOfBoundsException(count);
        }
        // Note: offset or count might be near -1&gt;&gt;&gt;1.
        if (offset &gt; value.length - count) {
            throw new StringIndexOutOfBoundsException(offset + count);
        }
        this.value = Arrays.copyOfRange(value, offset, offset+count);
}
</code></pre>

<p>åˆ†æä¸€ä¸‹ substring æºç </p>

<ul>
<li>æŠ¥StringIndexOutOfBoundsExceptionå¼‚å¸¸

<ul>
<li>beginIndex &lt; 0</li>
<li>endIndex &gt; value.length</li>
<li>subLen &lt; 0</li>
</ul></li>
<li>subLen æ˜¯æ–°çš„å­—ç¬¦ä¸²çš„é•¿åº¦</li>
<li>endIndexçš„æ„ä¹‰ä¸æ˜ç¡®

<ul>
<li>ç†è§£ä¸º beginIndex + subLen</li>
<li>beginIndex &lt;= endIndex &lt;= value.length</li>
</ul></li>
<li>å½“æˆªå–èŒƒå›´ä¸åŸå­—ç¬¦ä¸²ç›¸åŒè¿”å›thisï¼Œå¦åˆ™ new ä¸€ä¸ªæ–°çš„Stringå¯¹è±¡,åœ¨æ„é€ æ–¹æ³•ä¸­å¤åˆ¶ç”Ÿæˆäº†æ–°çš„ valueã€‚</li>
<li>substring(1,1)

<ul>
<li>&rdquo;&ldquo;==s.substring(1,1) //true</li>
<li>&rdquo;&ldquo;.equals(s.substring(1,1)) //false</li>
</ul></li>
</ul>

<h2 id="å¤‡æ³¨">å¤‡æ³¨</h2>

<ol>
<li><p>é€šè¿‡åå°„æœºåˆ¶å¯ä»¥å¯¹Stringè¿›è¡Œä¿®æ”¹</p></li>

<li><p>== å’Œ equals()</p>

<ul>
<li>== æ¯”è¾ƒå¼•ç”¨æ˜¯å¦æŒ‡å‘å †å†…å­˜ä¸­çš„åŒä¸€ä¸ªStringå¯¹è±¡</li>
<li>equals() æ¯”è¾ƒçš„æ˜¯å­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ</li>
</ul></li>

<li><p>String StringBuilder StringBuffer åŒºåˆ«</p>

<ul>
<li>Stringæ˜¯ä¸å¯å˜(final)ç±»ï¼Œæ¯æ¬¡åœ¨Stringå¯¹è±¡ä¸Šçš„æ“ä½œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›</li>
<li>StringBufferå’ŒStringBuilderæ˜¯å¯å˜çš„ï¼Œå®ƒå…è®¸åœ¨åŸæ¥å¯¹è±¡ä¸Šè¿›è¡Œæ“ä½œï¼Œè€Œä¸ç”¨æ¯æ¬¡å¢åŠ å¯¹è±¡ï¼›</li>
<li>StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ•ˆç‡è¾ƒä½ï¼Œè€ŒStringBuilderåˆ™ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡æœ€é«˜</li>
</ul></li>
</ol>

<h2 id="å‚è€ƒè¿æ¥">å‚è€ƒè¿æ¥</h2>

<ul>
<li><a href="http://www.importnew.com/21711.html">æµ…è°ˆJava Stringå†…å¹•ï¼ˆä¸Šï¼‰</a> &ndash; javap æŸ¥çœ‹å­—èŠ‚ç </li>
<li><a href="http://www.hollischuang.com/archives/99">Java 7 æºç å­¦ä¹ ç³»åˆ—ï¼ˆä¸€ï¼‰â€”â€”String</a> &ndash; çœ‹æºç è§£é‡Š</li>
<li><a href="http://brokendreams.iteye.com/blog/2260870">å…³äºJava Stringçš„ä¸€äº›æ€»ç»“</a></li>
</ul>

</div>

<link href="https://www.xizero.com/css/footer.css" rel="stylesheet">

<div class="footer">
	<div class="_hr"><span></span></div>
	@XIZERO Powered by <a href="http://hugo.spf13.com/">Hugo</a> and <a href="#">bigbig</a>
</div>

</body>
</html>

