<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.18.1" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="alternate" href="https://www.xizero.com//index.xml" type="application/rss+xml" title="XIZERO">
<link href="https://www.xizero.com/css/tomorrow.min.css" rel="stylesheet">
<link href="https://www.xizero.com//css/main.css" rel="stylesheet">
<link href="https://www.xizero.com/css/jqcloud.css" rel="stylesheet">
<script src="https://www.xizero.com/js/high.min.js"></script>
<script src="https://www.xizero.com/js/jqury.min.js"></script>
<script src="https://www.xizero.com/js/top.js"></script>
<script src="https://www.xizero.com/js/jqcloud.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<title>Java 序列化 - XIZERO</title>
</head>
<body>

<div id="gotop" title="🚀 go top"></div>

<div class="top">

	<div class="gos">
		<span class="go"><a href="/">Home</a></span>
		<span class="go"><a href="/tags">Tags</a></span>
		<span class="go"><a href="/about">About</a></span>
	</div>
	
	
		<div class="tit">
			Java 序列化
		</div>

	

</div>




<div class="con">
	

<h2 id="什么是序列化">什么是序列化？</h2>

<p>序列化是为了保存对象的状态，将对象的状态装换为字节数组，反序列化就是重构对象。</p>

<p>就像是冰冻魔法</p>

<blockquote>
<p>实际上，序列化的思想是 “冻结” 对象状态，传输对象状态（写到磁盘、通过网络传输等等），然后 “解冻” 状态，重新获得可用的 Java 对象。</p>
</blockquote>

<p>相关API</p>

<ul>
<li>java.io.Serializable</li>
<li>java.io.Externalizable</li>
<li>ObjectOutput</li>
<li>ObjectInput</li>
<li>ObjectOutputStream</li>
<li>ObjectInputStream</li>
</ul>

<h2 id="怎么用">怎么用？</h2>

<p>只要一个类实现了 <code>java.io.Serializable</code> 接口就能被序列化,该接口仅作为一个标识，标识这个类可以进行序列化。</p>

<p>ObjectOutputStream.writeObject(Object); 将对象入输出流，序列化</p>

<p>ObjectInputStream.readObject(); 从流中读取对象，反序列化</p>

<blockquote>
<p>标识:在进行序列化时，在 writeObject() 中会检测 obj instanceof Serializable</p>
</blockquote>

<h3 id="例">例</h3>

<p>序列化对象</p>

<pre><code class="language-java">import java.io.Serializable;

public class Cat implements Serializable {
    private String name;
    private String age;
    private static final long serialVersionUID = 1L;
    public Cat() {
    }

    public Cat(String name, String age) {

        this.name = name;
        this.age = age;
    }

   //get() set()

    @Override
    public String toString() {
        return &quot;Cat{&quot; +
                &quot;name='&quot; + name + '\'' +
                &quot;, age='&quot; + age + '\'' +
                '}';
    }
}

</code></pre>

<p>序列化过程</p>

<pre><code class="language-java">import com.x.model.Cat;

import java.io.*;

public class Main {

    public static void main(String[] args) {
        Cat cat = new Cat(&quot;huang&quot;,&quot;5&quot;);
        System.out.println(cat);



        try (FileOutputStream file = new FileOutputStream(&quot;he&quot;); ObjectOutputStream oos =  new ObjectOutputStream(file);){
            oos.writeObject(cat);
        } catch (IOException e) {
            e.printStackTrace();
        }

        try (FileInputStream file = new FileInputStream(&quot;he&quot;);ObjectInputStream ois = new ObjectInputStream(file)) {
            Cat cat1 = (Cat)ois.readObject();
            System.out.println(cat1);
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>

<h2 id="备注">备注</h2>

<ul>
<li><p>使用 Externalizable 接口，需要重写 writeExternal() 和 readExternal() ，可自定义序列化。</p></li>

<li><p>序列化ID(private static final long serialVersionUID)不同，反序列化报java.io.InvalidClassException异常。</p></li>

<li><p>静态变量不会序列化。</p></li>

<li><p>使用 transient 关键字的变量不会序列化。</p></li>

<li><p>序列化中继承</p>

<ul>
<li>父类实现序列化，子类默认继承</li>
<li>子类实现序列化，若父类变量也要保存则需要父类序列化；不需要父类序列化，反序列化时调用父类的无参构造函数。</li>
</ul></li>
</ul>

<h2 id="参考连接">参考连接</h2>

<ul>
<li><a href="http://www.hollischuang.com/archives/1150">Java对象的序列化与反序列化</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/java/j-5things1/">关于 Java 对象序列化您不知道的 5 件事</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-serial/">Java 序列化的高级认识</a></li>
</ul>

</div>


<div class="boo">
	<span></span>
</div>
<div class="footer">
	@XIZERO Powered by <a href="http://hugo.spf13.com/">Hugo</a> and <a href="#">bigbig</a>
</div>
</body>
</html>

